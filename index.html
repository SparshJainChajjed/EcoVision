<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>E-Waste Recycling App</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#0b0f14;--card:#121821;--muted:#8aa0b6;--text:#e8f1ff;--accent:#58d68d;--accent2:#20b2aa}
html,body{height:100%}
body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,#0b0f14,#0c1117 40%,#0b0f14);color:var(--text);display:flex;flex-direction:column}
header{padding:18px 16px;position:sticky;top:0;z-index:10;background:rgba(9,13,19,.6);backdrop-filter:saturate(140%) blur(8px);border-bottom:1px solid rgba(255,255,255,.06)}
header h1{font-size:20px}
main{width:min(1080px,92%);margin:24px auto 42px;display:grid;gap:18px}
.hero{padding:28px;border:1px solid rgba(255,255,255,.06);background:radial-gradient(1200px 500px at 10% -10%,rgba(88,214,141,.12),transparent),radial-gradient(900px 400px at 100% 10%,rgba(32,178,170,.12),transparent),var(--card);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
.hero h2{font-size:34px;font-weight:800;margin-bottom:6px}
.hero p{color:var(--muted)}
.card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:18px;box-shadow:0 6px 18px rgba(0,0,0,.25)}
.uploader{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
input[type=file]{padding:10px;border:1px dashed rgba(255,255,255,.25);border-radius:12px;background:#0e141b;color:var(--text)}
.button{display:inline-block;padding:12px 16px;border-radius:12px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#0b0f14;font-weight:700;border:none;cursor:pointer;text-decoration:none}
.button.ghost{background:transparent;border:1px solid rgba(255,255,255,.14);color:var(--text)}
.note{color:var(--muted);font-size:14px;margin-top:8px}
.preview-wrap{margin-top:12px;display:flex;justify-content:flex-start}
#preview{max-width:320px;max-height:220px;border-radius:12px;border:1px solid rgba(255,255,255,.08);display:none}
.result,.recycle,.options,.guide{display:none}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
.option-link{display:block;text-align:center;padding:14px 16px;border-radius:12px;background:#0e141b;border:1px solid rgba(255,255,255,.14);color:var(--text);text-decoration:none}
.option-link:hover{border-color:rgba(255,255,255,.28)}
.manual-chooser{display:none;margin-top:10px;gap:8px;align-items:center}
.manual-chooser label{margin-bottom:6px;display:block}
.manual-location{display:none;margin-top:10px;gap:8px}
.manual-location label{display:block;margin-bottom:6px}
input[type=text]{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.14);background:#0e141b;color:var(--text)}
.directory{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.dir-card{border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:14px;background:#0e141b}
.dir-card h4{margin-bottom:6px}
.dir-card a{color:var(--text);text-decoration:underline;word-break:break-all}
.guide h2{margin-bottom:8px}
.guide ol{margin-left:18px;margin-top:8px}
.guide .button{margin-top:12px}
footer{margin-top:auto;padding:20px;color:var(--muted);text-align:center;border-top:1px solid rgba(255,255,255,.06);background:rgba(9,13,19,.4)}
@media (max-width:900px){.grid2{grid-template-columns:1fr} .directory{grid-template-columns:1fr} .hero h2{font-size:26px} #preview{max-width:100%;max-height:260px}}
</style>
<script defer src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.16.0/dist/tf.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@2.1.0"></script>
</head>
<body>
<header><h1>E-Waste Recycling</h1></header>
<main>
  <section class="hero">
    <h2>Turn Old Gadgets Into Good</h2>
    <p>Identify a device from a photo, see its value, and recycle it responsibly.</p>
  </section>

  <section class="card">
    <h3>Identify Your Device</h3>
    <div class="uploader">
      <input id="imageInput" type="file" accept="image/*" />
      <button id="identifyBtn" class="button">Identify</button>
    </div>
    <div class="preview-wrap"><img id="preview" alt="preview" /></div>
    <p id="modelStatus" class="note">Model will load when you click Identify.</p>
    <div id="manualChooser" class="manual-chooser">
      <label for="manualCategory">Pick device type</label>
      <select id="manualCategory">
        <option value="">Select</option>
        <option value="Smartphone">Smartphone</option>
        <option value="Laptop">Laptop</option>
        <option value="Tablet">Tablet</option>
        <option value="Desktop PC">Desktop PC</option>
      </select>
      <button id="applyManual" class="button ghost">Apply</button>
    </div>
  </section>

  <section id="resultSection" class="card result">
    <h3>Result</h3>
    <p>Device: <strong id="deviceName">—</strong></p>
    <p>Original value: <strong id="originalValue">—</strong></p>
    <p>Current value: <strong id="currentValue">—</strong></p>
  </section>

  <section id="recycleSection" class="card recycle">
    <h3>Recycle it?</h3>
    <div class="buttons">
      <button id="recycleBtn" class="button">Yes, recycle</button>
      <a href="#" id="skipBtn" class="button ghost">No, maybe later</a>
    </div>
    <p id="locationStatus" class="note"></p>
    <div id="manualLocation" class="manual-location">
      <label for="cityInput">Enter your city</label>
      <input id="cityInput" placeholder="City name" />
      <button id="applyCity" class="button ghost">Show options</button>
    </div>
  </section>

  <section id="optionsSection" class="card options">
    <h3>Choose an option</h3>
    <div class="grid2">
      <a class="option-link" href="#" id="openDonation">Donate to NGO (free)</a>
      <a class="option-link" href="#" id="openRecycle">Recycle with company (for cash)</a>
    </div>
    <div id="directory" class="directory"></div>
  </section>

  <section id="guideDonation" class="card guide">
    <h2>Donate to NGO</h2>
    <ol>
      <li>Backup and erase personal data.</li>
      <li>Contact a local NGO that accepts e-waste.</li>
      <li>Schedule a pickup or drop-off.</li>
      <li>Keep a receipt or confirmation.</li>
    </ol>
    <a class="button" href="#" id="backFromDonation">← Back</a>
  </section>

  <section id="guideRecycle" class="card guide">
    <h2>Recycle for Money</h2>
    <ol>
      <li>Remove SIM and memory cards and reset the device if possible.</li>
      <li>Contact an authorized e-waste recycler and request a pickup.</li>
      <li>Share device details and get an estimate.</li>
      <li>Handover the device and receive payment or receipt.</li>
    </ol>
    <a class="button" href="#" id="backFromRecycle">← Back</a>
  </section>
</main>
<footer><p>© 2025 E-Waste App</p></footer>

<script>
let model,imageDataUrl=null;
const sampleDevices=[{name:"Smartphone",originalValue:"₹50,000",currentValue:"₹5,000"},{name:"Laptop",originalValue:"₹70,000",currentValue:"₹15,000"},{name:"Tablet",originalValue:"₹30,000",currentValue:"₹7,000"},{name:"Desktop PC",originalValue:"₹40,000",currentValue:"₹8,000"}];
const directory={bengaluru:{ngos:[{name:"Saahas Zero Waste",site:"https://saahaszerowaste.com/",phone:"+91-80-4168-9889"},{name:"Share At Door Step (pickup)",site:"https://shareatdoorstep.com/donate/computer-e-waste/",phone:""},{name:"BBMP E-Waste Collection (info)",site:"https://bbmp.gov.in/",phone:""}],recyclers:[{name:"Zolopik Recycling",site:"https://zolopik.com/",phone:"+91-8884449985"},{name:"E-Parisaraa Pvt. Ltd.",site:"https://www.eparisaraa.com/",phone:"+91-80-2836-7770"},{name:"Namo E-Waste (serviceable)",site:"https://www.namoe-waste.com/",phone:"1800-123-445555"}]},default:{ngos:[{name:"Share At Door Step (pickup)",site:"https://shareatdoorstep.com/donate/computer-e-waste/",phone:""},{name:"Local Municipal E-Waste Info",site:"https://www.india.gov.in/topics/environment-forests/e-waste",phone:""},{name:"Karo Sambhav Collection Finder",site:"https://www.karosambhav.com/",phone:""}],recyclers:[{name:"Zolopik Recycling",site:"https://zolopik.com/",phone:"+91-8884449985"},{name:"Recycler Directory (CPCB)",site:"https://cpcb.nic.in/e-waste/",phone:""},{name:"Producer Responsibility Orgs",site:"https://moefcc.gov.in/",phone:""}]}};
const modelStatus=document.getElementById("modelStatus");
const imageInput=document.getElementById("imageInput");
const identifyBtn=document.getElementById("identifyBtn");
const preview=document.getElementById("preview");
const resultSection=document.getElementById("resultSection");
const deviceNameEl=document.getElementById("deviceName");
const originalValueEl=document.getElementById("originalValue");
const currentValueEl=document.getElementById("currentValue");
const recycleSection=document.getElementById("recycleSection");
const optionsSection=document.getElementById("optionsSection");
const recycleBtn=document.getElementById("recycleBtn");
const skipBtn=document.getElementById("skipBtn");
const locationStatus=document.getElementById("locationStatus");
const manualLocation=document.getElementById("manualLocation");
const cityInput=document.getElementById("cityInput");
const applyCity=document.getElementById("applyCity");
const manualChooser=document.getElementById("manualChooser");
const manualCategory=document.getElementById("manualCategory");
const applyManual=document.getElementById("applyManual");
const guideDonation=document.getElementById("guideDonation");
const guideRecycle=document.getElementById("guideRecycle");
const openDonation=document.getElementById("openDonation");
const openRecycle=document.getElementById("openRecycle");
const backFromDonation=document.getElementById("backFromDonation");
const backFromRecycle=document.getElementById("backFromRecycle");

function mapToCategory(label){const l=label.toLowerCase();if(l.includes("laptop")||l.includes("notebook"))return"Laptop";if(l.includes("cellular")||l.includes("mobile")||l.includes("smartphone")||l.includes("telephone")||l.includes("ipod"))return"Smartphone";if(l.includes("monitor")||l.includes("desktop")||l.includes("screen"))return"Desktop PC";if(l.includes("tablet")||l.includes("ipad")||l.includes("book jacket"))return"Tablet";return null}
function pickDeviceFor(label){const mapped=mapToCategory(label);if(mapped)return sampleDevices.find(d=>d.name===mapped);return sampleDevices[Math.floor(Math.random()*sampleDevices.length)]}
async function ensureModel(){if(model)return true;try{modelStatus.textContent="Loading model…";model=await mobilenet.load();modelStatus.textContent="Model ready.";return true}catch(e){modelStatus.textContent="Model failed to load. Use manual picker below.";manualChooser.style.display="grid";return false}}
function setDevice(device){deviceNameEl.textContent=device.name;originalValueEl.textContent=device.originalValue;currentValueEl.textContent=device.currentValue;resultSection.style.display="block";recycleSection.style.display="block"}
imageInput.addEventListener("change",()=>{const f=imageInput.files[0];if(!f){preview.style.display="none";imageDataUrl=null;return}const r=new FileReader();r.onload=e=>{imageDataUrl=e.target.result;preview.src=imageDataUrl;preview.style.display="block"};r.readAsDataURL(f)})
identifyBtn.addEventListener("click",async()=>{if(!imageDataUrl){modelStatus.textContent="Choose an image first.";manualChooser.style.display="grid";return}const ok=await ensureModel();if(ok){try{modelStatus.textContent="Identifying…";const p=await model.classify(preview);const top=p&&p[0]?p[0].className:"unknown";const device=pickDeviceFor(top);setDevice(device);modelStatus.textContent="Done.";manualChooser.style.display="grid"}catch(e){modelStatus.textContent="Identification failed. Use manual picker.";manualChooser.style.display="grid"}}})
applyManual.addEventListener("click",()=>{const v=manualCategory.value;if(!v)return;const device=sampleDevices.find(d=>d.name===v)||sampleDevices[0];setDevice(device)})
function inBengaluru(lat,lon){return lat>=12.80&&lat<=13.20&&lon>=77.40&&lon<=77.80}
function cityKeyFromText(t){if(!t)return"default";const s=t.toLowerCase();if(s.includes("bengaluru")||s.includes("bangalore"))return"bengaluru";return"default"}
function renderDirectory(key){const dir=document.getElementById("directory");const data=directory[key]||directory.default;const cards=[];data.ngos.forEach(x=>{cards.push(`<div class="dir-card"><h4>NGO</h4><p>${x.name}</p><a href="${x.site}" target="_blank">${x.site}</a>${x.phone?`<p>${x.phone}</p>`:""}</div>`)});data.recyclers.forEach(x=>{cards.push(`<div class="dir-card"><h4>Recycler</h4><p>${x.name}</p><a href="${x.site}" target="_blank">${x.site}</a>${x.phone?`<p>${x.phone}</p>`:""}</div>`)});dir.innerHTML=cards.join("");optionsSection.style.display="block"}
recycleBtn.addEventListener("click",()=>{if("geolocation"in navigator){locationStatus.textContent="Detecting your location…";navigator.geolocation.getCurrentPosition(pos=>{const{latitude,longitude}=pos.coords;locationStatus.textContent=`Location detected (${latitude.toFixed(2)}, ${longitude.toFixed(2)}).`;const key=inBengaluru(latitude,longitude)?"bengaluru":"default";renderDirectory(key)},err=>{locationStatus.textContent="Unable to get location. Enter city below.";manualLocation.style.display="grid"})}else{locationStatus.textContent="Geolocation not supported. Enter city below.";manualLocation.style.display="grid"}})
applyCity.addEventListener("click",()=>{const key=cityKeyFromText(cityInput.value);renderDirectory(key)})
skipBtn.addEventListener("click",e=>{e.preventDefault();resultSection.style.display="none";recycleSection.style.display="none";optionsSection.style.display="none";document.getElementById("directory").innerHTML="";preview.style.display="none";imageInput.value=null;imageDataUrl=null;modelStatus.textContent="Ready."})
openDonation.addEventListener("click",e=>{e.preventDefault();guideRecycle.style.display="none";guideDonation.style.display="block"})
openRecycle.addEventListener("click",e=>{e.preventDefault();guideDonation.style.display="none";guideRecycle.style.display="block"})
backFromDonation.addEventListener("click",e=>{e.preventDefault();guideDonation.style.display="none"})
backFromRecycle.addEventListener("click",e=>{e.preventDefault();guideRecycle.style.display="none"})
</script>
</body>
</html>
