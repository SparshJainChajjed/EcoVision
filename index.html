<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>E-Waste Detection Model</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.11.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.1.0/dist/coco-ssd.min.js"></script>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body {
      background: linear-gradient(135deg,#1a2a6c,#2c3e50);
      color:#fff; min-height:100vh; padding:20px;
    }
    .container { max-width:1200px; margin:0 auto; }
    header { text-align:center; padding:30px 0; margin-bottom:30px; }
    h1 {
      font-size:2.8rem; margin-bottom:10px;
      background:linear-gradient(to right,#00c9ff,#92fe9d);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      text-shadow:0 2px 4px rgba(0,0,0,0.1);
    }
    .subtitle { font-size:1.2rem; opacity:.9; max-width:600px; margin:0 auto; }
    .main-content {
      display:flex; flex-wrap:wrap; gap:30px; margin-bottom:40px;
    }
    .upload-section, .results-section, .info-section {
      flex:1; min-width:300px;
      background:rgba(255,255,255,0.08);
      border-radius:15px; padding:25px;
      box-shadow:0 8px 32px rgba(0,0,0,0.3);
      backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,0.1);
    }
    .section-title {
      font-size:1.5rem; margin-bottom:20px; color:#00c9ff;
      display:flex; align-items:center; gap:10px;
    }
    .upload-area {
      border:2px dashed rgba(255,255,255,0.3);
      border-radius:10px; padding:40px 20px;
      text-align:center; cursor:pointer;
      transition:all .3s ease; margin-bottom:20px;
    }
    .upload-area:hover {
      border-color:#00c9ff; background:rgba(0,201,255,0.1);
    }
    .upload-icon { font-size:3rem; margin-bottom:15px; color:#00c9ff; }
    .btn {
      background:linear-gradient(to right,#00c9ff,#92fe9d);
      color:#1a2a6c; border:none; padding:12px 25px;
      border-radius:30px; font-weight:bold; cursor:pointer;
      transition:all .3s ease; display:inline-block; margin:5px;
    }
    .btn:hover {
      transform:translateY(-3px);
      box-shadow:0 5px 15px rgba(0,201,255,0.4);
    }
    .btn:disabled { background:#555; cursor:not-allowed; }
    #imagePreview {
      max-width:100%; max-height:300px;
      display:none; margin:20px auto;
      border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.3);
    }
    .results-container { min-height:300px; }
    .detection-result {
      background:rgba(255,255,255,0.1); border-radius:10px;
      padding:15px; margin-bottom:15px;
      display:flex; justify-content:space-between; align-items:center;
    }
    .result-info h3 { color:#92fe9d; margin-bottom:5px; }
    .confidence {
      background:rgba(0,201,255,0.2); padding:5px 10px;
      border-radius:20px; font-size:.9rem;
    }
    .loading { text-align:center; padding:20px; display:none; }
    .spinner {
      border:4px solid rgba(255,255,255,0.3);
      border-radius:50%; border-top:4px solid #00c9ff;
      width:40px; height:40px; animation:spin 1s linear infinite;
      margin:0 auto 15px;
    }
    @keyframes spin { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
    .ewaste-types {
      display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:20px; margin-top:20px;
    }
    .ewaste-card {
      background:rgba(255,255,255,0.1); border-radius:10px;
      padding:20px; transition:transform .3s ease;
    }
    .ewaste-card:hover {
      transform:translateY(-5px); background:rgba(0,201,255,0.2);
    }
    .ewaste-card h3 { color:#00c9ff; margin-bottom:10px; }
    footer { text-align:center; padding:30px 0; margin-top:40px;
      border-top:1px solid rgba(255,255,255,0.1);
    }
    @media(max-width:768px){
      .main-content { flex-direction:column; }
      h1 { font-size:2.2rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>E-Waste Detection System</h1>
      <p class="subtitle">Upload an image to detect electronic waste items using AI-powered computer vision</p>
    </header>

    <div class="main-content">
      <div class="upload-section">
        <h2 class="section-title">Upload Image</h2>
        <div class="upload-area" id="dropArea">
          <div class="upload-icon">üìÅ</div>
          <p>Drag &amp; drop or click to browse</p>
          <p>(JPG, PNG, JPEG)</p>
        </div>
        <input type="file" id="imageUpload" accept="image/*" style="display:none">
        <img id="imagePreview" alt="Preview"/>
        <button id="detectBtn" class="btn" disabled>Detect E-Waste</button>
        <button id="resetBtn" class="btn">Reset</button>
      </div>

      <div class="results-section">
        <h2 class="section-title">Detection Results</h2>
        <div class="loading" id="loading">
          <div class="spinner"></div>
          <p>Analyzing image for e-waste items...</p>
        </div>
        <div class="results-container" id="resultsContainer">
          <p>Upload an image and click ‚ÄúDetect E-Waste‚Äù to see results</p>
        </div>
      </div>
    </div>

    <div class="info-section">
      <h2 class="section-title">About E-Waste Detection</h2>
      <p>This AI-powered system can identify various types of electronic waste items in images. Proper e-waste disposal is crucial for environmental protection and resource recovery.</p>
      <div class="ewaste-types">
        <div class="ewaste-card"><h3>üì± Smartphones</h3><p>Detects mobile phones, tablets, and other handheld devices</p></div>
        <div class="ewaste-card"><h3>üíª Computers</h3><p>Identifies desktops, laptops, and computer components</p></div>
        <div class="ewaste-card"><h3>üì∫ Televisions</h3><p>Recognizes CRT, LCD, and LED display units</p></div>
        <div class="ewaste-card"><h3>üîã Batteries</h3><p>Detects various battery types requiring special disposal</p></div>
      </div>
    </div>

    <footer>
      <p>E-Waste Detection System | Powered by TensorFlow.js</p>
    </footer>
  </div>

  <script>
    const dropArea = document.getElementById('dropArea');
    const imageUpload = document.getElementById('imageUpload');
    const imagePreview = document.getElementById('imagePreview');
    const detectBtn = document.getElementById('detectBtn');
    const resetBtn = document.getElementById('resetBtn');
    const resultsContainer = document.getElementById('resultsContainer');
    const loading = document.getElementById('loading');

    let model, uploadedImage = null;

    async function init() {
      setupEventListeners();
      showLoading('Loading AI model...');
      try {
        model = await cocoSsd.load();
        hideLoading();
      } catch (e) {
        hideLoading();
        resultsContainer.innerHTML = `<p>Error loading model: ${e.message}</p>`;
      }
    }

    function setupEventListeners() {
      dropArea.addEventListener('click', () => imageUpload.click());
      imageUpload.addEventListener('change', handleImageUpload);

      ['dragover','dragleave','drop'].forEach(evt => {
        dropArea.addEventListener(evt, e => {
          e.preventDefault();
          if (evt === 'dragover') {
            dropArea.style.borderColor = '#00c9ff';
            dropArea.style.backgroundColor = 'rgba(0,201,255,0.2)';
          } else {
            dropArea.style.borderColor = 'rgba(255,255,255,0.3)';
            dropArea.style.backgroundColor = '';
            if (evt === 'drop' && e.dataTransfer.files.length) {
              imageUpload.files = e.dataTransfer.files;
              handleImageUpload();
            }
          }
        });
      });

      detectBtn.addEventListener('click', detectEwaste);
      resetBtn.addEventListener('click', resetApp);
    }

    function handleImageUpload() {
      const file = imageUpload.files[0];
      if (!file || !file.type.match('image.*')) return;
      const reader = new FileReader();
      reader.onload = e => {
        imagePreview.src = e.target.result;
        imagePreview.style.display = 'block';
        uploadedImage = e.target.result;
        detectBtn.disabled = false;
      };
      reader.readAsDataURL(file);
    }

    async function detectEwaste() {
      if (!uploadedImage || !model) return;
      showLoading('Analyzing image for e-waste items...');
      const img = new Image();
      img.src = uploadedImage;
      img.onload = async () => {
        const predictions = await model.detect(img);
        const ewasteClasses = [
          'cell phone','laptop','computer','tv','monitor',
          'keyboard','mouse','remote','microwave','oven'
        ];
        const items = predictions.filter(p =>
          ewasteClasses.includes(p.class.toLowerCase()) && p.score > 0.5
        );
        displayResults(items);
        hideLoading();
      };
    }

    function displayResults(items) {
      if (!items.length) {
        resultsContainer.innerHTML = `
          <p>No e-waste items detected.</p>
          <p>Try uploading a photo with phones, computers, or TVs.</p>
        `;
        return;
      }
      let html = `<h3>Detected E-Waste Items (${items.length})</h3>`;
      items.forEach(item => {
        const conf = (item.score * 100).toFixed(1);
        html += `
          <div class="detection-result">
            <div class="result-info">
              <h3>${item.class}</h3>
              <p>Position: (${Math.round(item.bbox[0])}, ${Math.round(item.bbox[1])})</p>
            </div>
            <div class="confidence">Confidence: ${conf}%</div>
          </div>
        `;
      });
      resultsContainer.innerHTML = html;
    }

    function resetApp() {
      imageUpload.value = '';
      imagePreview.style.display = 'none';
      detectBtn.disabled = true;
      resultsContainer.innerHTML = '<p>Upload an image and click ‚ÄúDetect E-Waste‚Äù to see results</p>';
      uploadedImage = null;
    }

    function showLoading(msg) {
      loading.querySelector('p').textContent = msg;
      loading.style.display = 'block';
      resultsContainer.style.display = 'none';
    }

    function hideLoading() {
      loading.style.display = 'none';
      resultsContainer.style.display = 'block';
    }

    window.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
